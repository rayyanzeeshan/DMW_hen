<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
<h1>chatbot</h1>
<div class="chatbox"></div>
<input type="text" name="" id="userInput" placeholder="Ask a Questions.......">
<button onclick="sendMessage()"> Send </button>

<script>
  async function sendMessage() {
    const userInput =document.getElementById("userInput").value
    if(!userInput)return;

    const chatbox=document.getElementById("chatbox");
    chatbox.innerHTML += `<div class='message user'>${userInput}</div>`;
    document.getElementById("userInput").value="";

    try{  
      const response = await fetch("https://api.together.xyz/v1/chat/completions",{
        method: "POST",
        headers:{
          "Content-Type": "application/json",
          "`Authorization": "Bearer tgp_v1_aCgU_y3tUqM1jF74jI38rRF5XkiOszorllsNwhNEmIQ"
      },
      body: JSON.stringify({ 
        model: "meta-llama/Llama-4-Maverick-17B-128E-Instruct-FP8",
        messages: [{role: "system", 
                    content: "What are some fun things to do in New York?"
                  },
                  {role: "user",content:userInput}
                  ]
       })
      });
      const data = await response.json();
      const botMessage="Error :No Response  from AI";
      
      console.log(data);
      
      if(data.choices && data.choices.length >0){
        botMessage = data.choices[0].message.content;
      }

      chatbot.innerhtml+=`<div class='message bot'>${botMessage}</div>`;
      chatbot.scrolltop=chatbot.scrollHeight;
    }catch(error){
      console.error("error fetching API response:",error);
      chatbot.innerHtml+=`<div class='messsage bot'>Error connecting to API</div>`;
    }
  }

</script>
</body>
</html>